---
title: "Software Tools for Earth and Environmental Science"
subtitle:  "-- 10th WEEK --"
author: "Emir Toker"
date: "14/11/2019"
output: 
  revealjs::revealjs_presentation:
    theme: league
---

## **R Promgramming - Part 2**

- **Syllabus and Book**
- **DataCamp Class**
- **Practice - Assessment Test**
- **R Advance - <span style="color:orange">*ncdf4*</span> & <span style="color:orange">*RNetCDF*</span> Packages**

<span style="color:orangered">**Coffee Break**</span>

- **R Statistics - <span style="color:orange">*hist, summary, etc.*</span> functions**
- **R Advance - <span style="color:orange">*ggplot2*</span> Package**

<span style="color:orangered">**QUIZ**</span>

- **Next Week**



# **Syllabus and Book**
## **Syllabus**

![](syllabus_11th.png)

## **Book**

![](book_11th.png)

## **Book**

![](book_11th_b.png)

# **DataCamp Class**
## **DataCamp Class**

![](datacamp_11th.png)

[LINK](https://www.datacamp.com/enterprise/software-tools-introduction-to-r)

# **Practice - Assessment Test**
## **Practice - Assessment Test**

1. Open Your R-Studio :)
2. Create a new **"R Project"**
3. Create a new **"R Script"** file and save it
4. Learn your **Working Directory**
5. Check **files**, under your working directory 
6. Create a **vector** with four **numeric** elements using **seq()**
7. **Assign** it to a new variable *(vec1)*
8. Check the **length** of vector
9. Calculate the **mean** of vector
10. Coerce your **numeric** vector to **characteristic** vector
11. Check the **class** of your new vetcor
12. **Print** the second element of your vector
13. **Change** the second element as "TRUE", and assign it as ***vec1***

## **Practice - Assessment Test**

14. Create a new **vector** with 12 elements using **runif()**
15. Assign it as ***vec2***
16. Create a new **matrix**, 3 rows, 4 columns using this vector
17. **Assign** this matrix as a new variable
18. Check **dimensions** of this matrix
19. Create a new matrix (4x4) with using ***vec1*** and ***vec2***
20. Explain what is happening (bycol or byrow)
21. Create the same matrix again, this time with **byrow=T**
22. Assign it as ***mat1***
23. Create a new **array** with 4 rows, 4 columns and 2 layers using ***mat1***
24. Assign it as ***arr1***
25. **Select** 2nd row, 3rd column and change it with ***NA*** for each layers


## **Practice - Assessment Test**

26. Go to main web page of our course
27. Copy this data : Istanbul_Cekmekoy_Omerli_26072017-29072017_15min - txt
28. Paste your **"Download"** folder
29. Turn back to R Studio
30. **Read** the station data, be careful about file **path**, **header** and **seperator**
31. Assign it as **sta_data**
32. Check the **structure** and **attributes** of **sta_data**
33. **Print** and **plot** *precipiptation* of ***sta_data***
34. Write a **condition**; **if** total precipitation is **higher** than zero than **print** "Weather was rainy"
35. Install and load "ncdf4" and "RNetCDF" package


## NETCDF

![](netcdf_1.png)


# **R Advance - <span style="color:orange">*ncdf4*</span> & <span style="color:orange">*RNetCDF*</span> Packages**
## **R Advance - <span style="color:orange">*ncdf4*</span> Package**

![](ncdf4_a.png)


## **R Advance - <span style="color:orange">*ncdf4*</span> Package**


- ncdf4_open <- <span style="color:orangered">**nc_open**</span>("cru_1901_2012_tmp_TR.nc")


```
> ncdf4_open <- nc_open("cru_1901_2012_tmp_TR.nc")
> ncdf4_open

File ~/Desktop/Dersler/YÃ¼ksek_Lisans_Ders/Data Analysis/proje/Data_Analysis_Proje/cru_1901_2012_tmp_TR.nc (NC_FORMAT_CLASSIC):

     1 variables (excluding dimension variables):
        double tmp[lon,lat,time]   
            long_name: near-surface temperature
            units: degrees Celsius
            _FillValue: 9.96920996838687e+36
            missing_value: 9.96920996838687e+36
            correlation_decay_distance: 1200

     3 dimensions:
        lon  Size:42
            standard_name: longitude
            long_name: longitude
            units: degrees_east
            axis: X
        lat  Size:18
            standard_name: latitude
            long_name: latitude
            units: degrees_north
            axis: Y
        time  Size:1344   *** is unlimited ***
            standard_name: time
            long_name: time
            units: days since 1900-01-01 00:00:00
            calendar: standard

    10 global attributes:
        CDI: Climate Data Interface version 1.6.9 (http://mpimet.mpg.de/cdi)
        Conventions: CF-1.4
        history: Mon Feb 22 16:24:47 2016: cdo sellonlatbox,25,46,34,43 cru_ts3.21.1901.2012.tmp.dat.nc cru_1901_2012_tmp_TR.nc
Wed 10 Jul 2013 17:04:15 BST : User ianharris : Program makegridsauto.for called by update.for
        source: Run ID = 1307101324
Data generated by BADC from:
tmp.1307101049.dtb
        institution: Data held at British Atmospheric Data Centre, RAL, UK.
        title: CRU TS3.21 Mean Temperature
        references: Information on the data is available at http://badc.nerc.ac.uk/data/cru/
        comment: Data restrictions: for academic research use only.Contact BADC for details
        contact: BADC <badc@rl.ac.uk>
        CDO: Climate Data Operators version 1.7.0rc2 (http://mpimet.mpg.de/cdo)
```


## **R Advance - <span style="color:orange">*RNetCDF*</span> Package**

![](rncdf_a.png)

## **R Advance - <span style="color:orange">*RNetCDF*</span> Package**

- rnetcdf_open <- <span style="color:orangered">**open.nc**</span>("cru_1901_2012_tmp_TR.nc")
- <span style="color:orangered">**print**</span>(rnetcdf_open)

```
> rnetcdf_open <- open.nc(veri.ad)
> print.nc(rnetcdf_open)

netcdf classic {
dimensions:
	lon = 42 ;
	lat = 18 ;
	time = UNLIMITED ; // (1344 currently)
variables:
	NC_DOUBLE lon(lon) ;
		NC_CHAR lon:standard_name = "longitude" ;
		NC_CHAR lon:long_name = "longitude" ;
		NC_CHAR lon:units = "degrees_east" ;
		NC_CHAR lon:axis = "X" ;
	NC_DOUBLE lat(lat) ;
		NC_CHAR lat:standard_name = "latitude" ;
		NC_CHAR lat:long_name = "latitude" ;
		NC_CHAR lat:units = "degrees_north" ;
		NC_CHAR lat:axis = "Y" ;
	NC_DOUBLE time(time) ;
		NC_CHAR time:standard_name = "time" ;
		NC_CHAR time:long_name = "time" ;
		NC_CHAR time:units = "days since 1900-01-01 00:00:00" ;
		NC_CHAR time:calendar = "standard" ;
	NC_DOUBLE tmp(lon, lat, time) ;
		NC_CHAR tmp:long_name = "near-surface temperature" ;
		NC_CHAR tmp:units = "degrees Celsius" ;
		NC_DOUBLE tmp:_FillValue = 9.96920996838687e+36 ;
		NC_DOUBLE tmp:missing_value = 9.96920996838687e+36 ;
		NC_DOUBLE tmp:correlation_decay_distance = 1200 ;

// global attributes:
		NC_CHAR :CDI = "Climate Data Interface version 1.6.9 (http://mpimet.mpg.de/cdi)" ;
		NC_CHAR :Conventions = "CF-1.4" ;
		NC_CHAR :history = "Mon Feb 22 16:24:47 2016: cdo sellonlatbox,25,46,34,43 cru_ts3.21.1901.2012.tmp.dat.nc cru_1901_2012_tmp_TR.nc
Wed 10 Jul 2013 17:04:15 BST : User ianharris : Program makegridsauto.for called by update.for" ;
		NC_CHAR :source = "Run ID = 1307101324
Data generated by BADC from:
tmp.1307101049.dtb" ;
		NC_CHAR :institution = "Data held at British Atmospheric Data Centre, RAL, UK." ;
		NC_CHAR :title = "CRU TS3.21 Mean Temperature" ;
		NC_CHAR :references = "Information on the data is available at http://badc.nerc.ac.uk/data/cru/" ;
		NC_CHAR :comment = "Data restrictions: for academic research use only.Contact BADC for details" ;
		NC_CHAR :contact = "BADC <badc@rl.ac.uk>" ;
		NC_CHAR :CDO = "Climate Data Operators version 1.7.0rc2 (http://mpimet.mpg.de/cdo)" ;
}
```


## R Advance - <span style="color:orange">*ncdf4*</span> VS <span style="color:orange">*RNetCDF*</span>

<style>

.column-right0{
  float: right;
  width: 50%;
  text-align: right;
}
.column-left0{
  float: left;
  width: 50%;
  text-align: left;
}
</style>

<div class="column-left0">

```
- class(my_nc)
- str(my_nc)
- attributes(my_nc)
- attributes(my_nc$var)
- attributes(my_nc$var$t2m)

- my_nc$var$t2m$longname
- my_nc$var$t2m$name
- my_nc$var$t2m
 
- ncatt_get(my_nc,'t2m')
```

```
- ncvar_get(my_nc,my_nc$var$t2m$name)
- ncvar_get(my_nc,"t2m")
- 

- class(temp)
- dim(temp)
- str(temp)

- attributes(my_nc)
- attributes(my_nc$dim)
- lon <- ncvar_get(my_nc, my_nc$dim$lon)
- lat <- ncvar_get(my_nc, my_nc$dim$lat)
- time <- ncvar_get(my_nc, my_nc$dim$time)

```

</div>



<div class="column-right0">

```
- attributes(my_nc)
- attributes(my_nc$dim)
- lon <- ncvar_get(my_nc, my_nc$dim$lon)
- lat <- ncvar_get(my_nc, my_nc$dim$lat)
- time <- ncvar_get(my_nc, my_nc$dim$time)

```

</div>


## **R Advance - <span style="color:orange">*ncdf4*</span> Package**


```
- ncatt_get(my_nc,"time")


```



## **R Advance - <span style="color:orange">*ggplot2*</span> Package**



# <span style="color:orange">**Coffee Break**</span>


# **R Statistics - <span style="color:orange">*hist, summary, etc.*</span> functions**
## **R Statistics - <span style="color:orange">*hist, summary, etc.*</span> functions**



